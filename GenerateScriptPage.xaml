<UserControl x:Class="MyWPFApp.GenerateScriptPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:MyWPFApp">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <!-- Added missing row so txtStatus (Grid.Row=5) is valid -->
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <TextBlock Grid.Row="0" Text="Generate Script" FontSize="20" FontWeight="Bold" Margin="0,0,0,10"/>
        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,10">
            <TextBox x:Name="txtTestCaseId" Width="200" Height="30" Margin="0,0,10,0" Text="Enter Test Case ID"/>
            <Button x:Name="btnFetchTestPlan" Content="Fetch and Execute Test Plan" Width="180" Height="30" Background="#FF42A5F5" Foreground="White"/>
        </StackPanel>
        <StackPanel Grid.Row="2" x:Name="spTestPlan" Visibility="Collapsed" Margin="0,0,0,10">
            <TextBlock Text="Test Plan" FontSize="14" FontWeight="Bold" Margin="0,0,0,5"/>
            <DataGrid x:Name="dgTestPlan" AutoGenerateColumns="False" Height="150" CanUserAddRows="False" CanUserDeleteRows="False" VerticalScrollBarVisibility="Auto">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Test Case ID" Binding="{Binding testCaseId}" Width="100"/>
                    <DataGridTextColumn Header="Step" Binding="{Binding step}" Width="300"/>
                    <DataGridTextColumn Header="Test Data" Binding="{Binding testData}" Width="200"/>
                </DataGrid.Columns>
            </DataGrid>
        </StackPanel>
        <ScrollViewer Grid.Row="3" VerticalScrollBarVisibility="Auto">
            <TabControl x:Name="tabControl" Margin="0,0,0,10">
                <TabItem x:Name="tabExecutionLogs" Header="Execution Logs" Visibility="Collapsed">
                    <StackPanel>
                        <ListView x:Name="lvExecutionLogs" Margin="0,10,0,10">
                            <ListView.View>
                                <GridView>
                                    <GridViewColumn Header="Timestamp" Width="150" DisplayMemberBinding="{Binding timestamp}"/>
                                    <GridViewColumn Header="Message" Width="400" DisplayMemberBinding="{Binding message}"/>
                                    <GridViewColumn Header="Status" Width="100" DisplayMemberBinding="{Binding status}"/>
                                </GridView>
                            </ListView.View>
                        </ListView>
                    </StackPanel>
                </TabItem>
            </TabControl>
        </ScrollViewer>
        <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <Button x:Name="btnExit" Content="Exit to Execution Log" Width="150" Height="30" Background="#FFEF5350" Foreground="White"/>
        </StackPanel>
        <!-- txtStatus was referencing Grid.Row=5 but the Grid originally had only 5 rows; added a row above.
             Keep txtStatus at Grid.Row=5 so code-behind FindName("txtStatus") continues to work. -->
        <TextBlock x:Name="txtStatus" Grid.Row="5" Margin="10,0,0,0" Text="Ready" FontSize="14" Foreground="Green"/>
    </Grid>
</UserControl>